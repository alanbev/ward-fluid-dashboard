(this.webpackJsonpward_fluid_dashboard=this.webpackJsonpward_fluid_dashboard||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(5),c=n.n(s),r=(n(3),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,12)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))}),u=[{bed:1,hosp_number:11111111,patient_name:"Mary Test",on_iv_fluids:!0,iv_status:"prescribed",bags:[{bag_id:1,fluid:"0.9% Saline",volume:1e3,rate:125,bag_running:!0,time_started:null},{bag_id:2,fluid:"5% Dextrose",volume:1e3,rate:83,bag_running:!0,time_started:null}]},{bed:2,hosp_number:2222222,patient_name:"Henry Test",on_iv_fluids:!0,iv_status:"prescribed",bags:[{bag_id:3,fluid:"Plasmalyte",volume:1e3,rate:100,bag_running:!0,time_started:null},{bag_id:4,fluid:"0.9% saline 40mmol KCl",volume:1e3,rate:100,bag_running:!0,time_started:null},{bag_id:5,fluid:"5% dextrose 40mmol KCl",volume:1e3,rate:100,bag_running:!0,time_started:null}]},{bed:3,hosp_number:333333,patient_name:"Fred Test",on_iv_fluids:!1,iv_status:"not_prescribed",bags:[]},{bed:4,hosp_number:4444444,patient_name:"Freda Test",on_iv_fluids:!0,iv_status:"prescribed",bags:[{bag_id:6,fluid:"TPN",volume:3e3,rate:125,bag_running:!0,time_started:null},{bag_id:7,fluid:"0.9% saline",volume:1e3,rate:10,bag_running:!0,time_started:null},{bag_id:8,fluid:"0.9% Saline 40mmol KCl",volume:1e3,rate:43,bag_running:!0,time_started:null}]},{bed:5,hosp_number:555555,patient_name:"William Test",on_iv_fluids:!0,iv_status:"prescribed",bags:[{bag_id:9,fluid:"Plasmalyte",volume:1e3,rate:100,bag_running:!0,time_started:null},{bag_id:10,fluid:"0.9% saline 40mmol KCl",volume:1e3,rate:100,bag_running:!0,time_started:null},{bag_id:11,fluid:"5% dextrose 40mmol KCl",volume:1e3,rate:100,bag_running:!0,time_started:null}]},{bed:6,hosp_number:66666666,patient_name:"Henry Test",on_iv_fluids:!1,iv_status:"prescribed",bags:[{bag_id:12,fluid:"Plasmalyte",volume:1e3,rate:83,bag_running:!0,time_started:null},{bag_id:13,fluid:"Plasmalyte",volume:1e3,rate:83,bag_running:!0,time_started:null},{bag_id:14,fluid:"5% dextrose 40mmol KCl",volume:1e3,rate:83,bag_running:!0,time_started:null}]},{bed:7,hosp_number:7777777777,patient_name:"Diana Test",on_iv_fluids:!0,iv_status:"not-prescribed",bags:[]}],b=n(2),o=n(0);var d=function(e){var t,n,a=e.position_in_array,i="show_button";return e.message_from_patient?(n="On IV fluids"===e.message_from_patient?"Discontinue IV fluids":"Commence on IV fluids",t=e.message_from_patient):e.message_from_bag?(n="Bag not running"===e.message_from_bag?"Start Bag":"Pause Bag",t=e.message_from_bag):(n=e.message_from_stopped_bag?"Take down Bag":"Cancel Bag",e.bag_running&&(i="hidden")),Object(o.jsxs)("span",{children:[Object(o.jsxs)("span",{children:[" ",t]}),Object(o.jsxs)("button",{id:"start_ivfluid_message",className:i,onClick:function(){return e.click_function(a)},children:[" ",n," "]})]})};var l=function(e){var t=Object(a.useState)(e.vol_remaining),n=Object(b.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(e.bag_running),r=Object(b.a)(c,2),u=r[0],d=r[1];return Object(a.useEffect)((function(){d(e.bag_running);var t=function(){s(i-1),e.fluid_infused.current=i};if(u&&i>0){var n=function(){setTimeout(t,1e5/e.rate)};return n(),function(){clearTimeout(n)}}}),[u,i,e.bag_running,e.vol_remaining,e.checkbag]),Object(a.useEffect)((function(){e.checkbag&&s(e.change_vol)}),[e.change_vol]),Object(o.jsx)("span",{children:i})};var _=function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),i=n[0],s=n[1];return Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),void 0===i?e.getVol(e.vol):e.getVol(i),s("")},children:[Object(o.jsx)("label",{htmlFor:"new_volume",children:" Enter Correct volume "}),Object(o.jsx)("input",{type:"number",id:"new_volume",required:!0,value:i,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("button",{type:"submit",children:"Confirm Volume"}),Object(o.jsx)("span",{children:" Bag set to stopped for volume change - re-start after check complete"})]})};var g=function(e){var t=Object(a.useState)(!0),n=Object(b.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(e.change_vol),r=Object(b.a)(c,2),u=r[0],d=r[1];Object(a.useEffect)((function(){e.getVol(u)}),[u]),Object(a.useEffect)((function(){s(!0)}),[u]);var l=Object(o.jsx)(_,{getVol:d,vol:u},e.index);return Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:" Confirm Bag Volume Correct"}),Object(o.jsx)("button",{id:"check_is_corrct",onClick:function(){s(!0)},children:"Yes "}),Object(o.jsx)("button",{id:"check_not_correct",onClick:function(){s(!1),console.log(e.bag_running),e.bag_running&&e.is_bag_running(e.running_bags-1),e.start_stop_bag(!1)},children:" No "}),Object(o.jsx)("div",{className:i?"hidden":"show",children:l})]})};var j=function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),i=n[0],s=n[1];return Object(o.jsxs)("form",{id:"rate_entry",onSubmit:function(t){t.preventDefault(),e.new_rate(i)},children:[Object(o.jsx)("label",{htmlFor:"rate_entry_input",children:"Enter New Rate for Bag (ml/hr) "}),Object(o.jsx)("input",{id:"rate_entry_input",type:"number",required:!0,min:"0",onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("button",{id:"rate_submit_button",type:"submit",children:"Change Bag Rate"})]})};var m=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(e.bag.volume),r=Object(b.a)(c,2),u=r[0],_=r[1],m=Object(a.useState)(!1),f=Object(b.a)(m,2),O=f[0],h=f[1],p=Object(a.useState)("bag"),v=Object(b.a)(p,2),x=v[0],k=v[1],C=Object(a.useState)(e.bag.volume),w=Object(b.a)(C,2),S=w[0],y=w[1],B=Object(a.useState)(!1),T=Object(b.a)(B,2),E=T[0],N=T[1],V=Object(a.useState)(!1),I=Object(b.a)(V,2),F=I[0],P=I[1],D=Object(a.useState)(e.bag.rate),K=Object(b.a)(D,2),R=K[0],H=K[1],M=Object(a.useState)(!1),q=Object(b.a)(M,2),J=q[0],L=q[1],W=Object(a.useState)(e.bag.volume),Y=Object(b.a)(W,2),z=Y[0],A=Y[1],G=Object(a.useRef)(),Q=Object(a.useRef)("white"),U=Object(a.useRef)(0),X=new Date;Object(a.useEffect)((function(){if(i){var e=function(){L(!0)},t=function(){setTimeout(e,3e4)};return E&&clearTimeout(t),t(),function(){clearTimeout(t)}}}),[i,E]),Object(a.useEffect)((function(){E&&_(S)}),[S,E]),Object(a.useEffect)((function(){X=new Date,O&&(X.getMinutes()>9?G.current="Bag first started at: ".concat(X.getHours(),":").concat(X.getMinutes()):G.current="Bag first started at: ".concat(X.getHours(),":0").concat(X.getMinutes()))}),[O]),Object(a.useEffect)((function(){!0===J&&(e.check_due(!0),Q.current="amber"),!0===E&&(e.check_due(!1),Q.current="white")}),[J,E]),Object(a.useEffect)((function(){i&&!U.current<=1&&!E?e.is_bag_running(e.running_bags+1):!E&&O&&!U.current<=1&&e.is_bag_running(e.running_bags-1)}),[i,u]),Object(a.useEffect)((function(){U.current=S}),[S]),Object(a.useEffect)((function(){U.current<=1&&$()}),[U.current]);var Z=Object(o.jsx)(l,{bag_running:i,vol_remaining:u,change_vol:S,checkbag:E,patient_bags_running:e.running_bags,rate:R,check:L,fluid_infused:U},e.index),$=function(){s(!i),h(!0)},ee=function(){k("hidden"),e.decrement_bags()},te=Object(o.jsx)(d,{click_function:function(){O?window.confirm("Please perform a bag volume check before taking down a bag (Click Check Bag, correct the volume then click Check Complete).  If you have done this press OK to take down the bag. If not, click Cancel and check the bag volume now")&&ee():ee()},message_from_stopped_bag:O,bag_running:i,position_in_array:e.array_position}),ne=Object(o.jsx)(g,{index:e.index,getVol:y,vol:S,bag_running:i,start_stop_bag:s,is_bag_running:e.is_bag_running,running_bags:e.running_bags},e.index),ae=Object(o.jsx)(j,{new_rate:H},e.index);return Object(o.jsxs)("div",{className:x,children:[Object(o.jsxs)("span",{children:["Bag Id:-  ",e.bag.bag_id]}),Object(o.jsxs)("span",{id:"fluid",children:[" ",e.bag.fluid,"  ",R,"  ml/hr"]}),Object(o.jsxs)("span",{children:["Volume remaining ",Z,"ml"]}),Object(o.jsxs)("span",{className:E?"hidden":"show_button",children:[" ",Object(o.jsx)(d,{click_function:$,message_from_bag:i?"Bag running":"Bag not running"})]}),Object(o.jsxs)("span",{className:O?"show_button":"hidden",children:[" ",Object(o.jsxs)("button",{className:Q.current,onClick:function(){L(!1),E&&(e.setFluidsToday(e.fluids_today+(z-U.current)),A(U.current)),N(!E)},children:[" ",E?"Bag Check Complete":"Check Bag"," "]})]}),Object(o.jsxs)("span",{children:[" ",Object(o.jsxs)("button",{id:"rate_button",onClick:function(){P(!F)},children:[" ",F?"Hide Change Rate":"Change Bag Rate"]})]}),Object(o.jsxs)("span",{children:[" ",te]}),Object(o.jsxs)("span",{children:["  ",G.current," "]}),Object(o.jsx)("div",{className:F?"show":"hidden",children:ae}),Object(o.jsx)("div",{className:E?"show":"hidden",children:ne})]})};var f=function(e){var t=Object(a.useState)(e.patient_data.on_iv_fluids),n=Object(b.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(!1),r=Object(b.a)(c,2),u=r[0],l=r[1],_=Object(a.useState)(e.patient_data.bags.length),g=Object(b.a)(_,2),j=g[0],f=g[1],O=Object(a.useState)(0),h=Object(b.a)(O,2),p=h[0],v=h[1],x=Object(a.useState)("hidden"),k=Object(b.a)(x,2),C=k[0],w=k[1],S=Object(a.useState)("green"),y=Object(b.a)(S,2),B=y[0],T=y[1],E=Object(a.useState)(""),N=Object(b.a)(E,2),V=N[0],I=N[1],F=Object(a.useState)(!1),P=Object(b.a)(F,2),D=P[0],K=P[1],R=Object(a.useState)(0),H=Object(b.a)(R,2),M=H[0],q=H[1],J=function(){f(j-1)},L=i?"On IV fluids":"Not on IV fluids",W=e.patient_data.bags.map((function(t,n){return Object(o.jsx)(m,{showstatus:e.showstatus,patient_data:e.patient_data,bag:t,on_fluids:i,decrement_bags:J,is_bag_running:v,running_bags:p,check_due:K,fluids_today:M,setFluidsToday:q},n)}));return Object(a.useEffect)((function(){i?0===j?(T("red"),w("show"),I("On IV fluids but no bags prescribed")):0===p?(T("red"),w("show"),I("On IV fluids but no bags running")):D?(T("amber"),w("show"),I("Bag check due")):(w("hidden"),T("green"),I("")):(w("hidden"),T("green"),I(""))}),[i,j,p,D]),console.log(V),console.log("total fluid infused".concat(M)),Object(o.jsxs)("div",{className:B,id:e.patient_data.hosp_number,children:[Object(o.jsxs)("span",{id:"bed_number",children:[" ","Bed ".concat(e.patient_data.bed)]}),Object(o.jsx)("span",{id:"patient_name_message",children:e.patient_data.patient_name}),Object(o.jsxs)("span",{id:"hosp_number",children:[" ",e.patient_data.hosp_number]}),Object(o.jsxs)("span",{id:"on_fluid_message",children:[" ",Object(o.jsx)(d,{click_function:function(){s(!i)},message_from_patient:L})," "]}),Object(o.jsx)("span",{id:"numb_bags_message",children:"".concat(j," bags prescribed")}),Object(o.jsx)("button",{onClick:function(){l(!u)},children:" Show/Hide Bags "}),Object(o.jsxs)("span",{children:[" ",p," bag(s) running. "]}),Object(o.jsxs)("span",{id:"checked_volume",children:["Total checked volume: ",M," ml"]}),Object(o.jsx)("div",{id:"alertmessage",className:C,children:V}),Object(o.jsxs)("div",{className:u?"show":"hidden",children:[" ",W," "]})]})};function O(){var e=u;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h,{}),Object(o.jsx)(p,{data:e})]})}function h(){return Object(o.jsx)("div",{id:"ward",children:"Ward 26"})}function p(e){return e.data.map((function(e,t){return Object(o.jsx)(f,{patient_data:e,patient_in_array:t},t)}))}c.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root")),r()},3:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.a7e0ab15.chunk.js.map